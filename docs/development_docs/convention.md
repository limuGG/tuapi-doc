---
sidebar_position: 2
sidebar_label: 接口约定
---

# 接口约定

## 编码

---

数据编码统一为 `utf-8`.

## 密钥

---

接口文档中提到的 `ApiKey & secret`, 都是指商户 `ApiKey & secret`,可在`商户后台->设置->商户接入`查看.

## 字段选填

---

对于接口参数标记为 选填 的字段,可传入具体的值或者空字符串.

## 请求

---

对于需要传入数据的请求,一律采用 `POST` 方式,并且请求头中必须包含 `Content-Type: application/json` .  
对于返回数据的请求,一律采用 `GET` 方式.

## T-API-KEY

请求头 `T-API-KEY` 为商户 `ApiKey` ,用于标识商户身份.  
所有请求头中必须包含 `T-API-KEY` .

:::note 例如:

```shell
curl -X POST api_url/xxx \
  -H 'T-API-KEY: xxx' \
  -H 'Content-Type: application/json' \
  -d '{"s": "加密后的数据"}'
```

:::

## 加密解密

接口采用全程双向加密,保证数据安全性.  
加密方式 `AES-CBC`.

### 加密

秘钥为`secret`.  
向量为随机生成的`16`位字节码.  
将数据进行加密,得到加密数据,再将向量放入加密数据的前,得到最终的加密数据.

### 解密

密钥为`secret`.  
向量为`加密数据`中的前`16`位字节码.  
将向量从加密数据中取出,得到主体加密数据,再进行解密,得到最终的数据.

请参阅 [加密解密](../tools/home.md) 了解更多信息.

## 入参

数据格式必须为 `JSON` 格式  
将数据转换为 `JSON` 格式后,进行 `AES-CBC` 加密,再将加密后的数据放入 `body` 中进行传输.  
`body` 中的数据格式为 `JSON` 格式,并且必须包含以下字段:

- `s` : 加密后的数据

:::note 例如:

```json
{
  "s": "加密后的数据"
}
```

:::

## 响应

返回数据为 `JSON` 格式

```json
{
  "code": 200,
  "data": "加密后的数据"
}
```

将 `data` 中的数据进行 `AES-CBC` 解密,得到 `JSON` 格式的数据,即为接口返回的数据.

如果 `code` 不为 `200`,则 返回以下数据

```json
{
  "code": 400,
  "msg": "错误信息"
}
```
